<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title></title>
  <link rel="stylesheet" href="css/jquery-ui.css">
  <script src="js/jquery-1.10.2.js"></script>
  <script src="js/jquery-ui.js"></script>
  <script src="js/obj.js"></script>
   
  <style>
    body { font-size: 62.5%; }
    label, input { display:block; }
    input.text { margin-bottom:12px; width:95%; padding: .4em; }
    fieldset { padding:0; border:0; margin-top:25px; }
    h1 { font-size: 1.2em; margin: .6em 0; }
    div#users-contain { width: 350px; margin: 20px 0; }
    div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
    div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
    .ui-dialog .ui-state-error { padding: .3em; }
    .validateTips { border: 1px solid transparent; padding: 0.3em; }
  </style>

  <script>
  $(function() {
 
    $( "#dialog-form" ).dialog({
      autoOpen: false,
      height: 300,
      width: 350,
      modal: true,
      buttons: {
        "Create an account": function() {
          
          var name = $( "#name" ),
            age = $( "#age" ),
            gender = $( "#gender" ),
            zipcode = $( "#zipcode" ).val(),
            income = $( "#income" ),
            description = $( "#description" ),
            isManager = false,
            email = $( "#email" ),
            phone = $( "#phone" ),
            interest = $('#interests :selected').text();   

            if($('#checkbox').is(':checked')){
              isManager = true;
              team = $('#newTeam').val();   
            } 
            else team = $('#teams :selected').text();   


            // Create new user object
            var url = 'http://geocoder.ca/?postal=' + zipcode + '&geoit=xml&topmatches=5';
            $.ajax({
                type: "GET",
                url: url,
                cache: false,
                dataType: "xml",
                success: function(xml) {
                /*$(xml).find('geodata').each(function(){
                    $(this).find("latt").each(function(){
                        var latt = $(this).text();
                        console.log(zipcode);
                        console.log(latt);
                    });
                  });
               }*/

               console.log(xml);
             }
            });


        },
        Cancel: function() {
          $( this ).dialog( "close" );
        }
      },
      close: function() {
        //allFields.val( "" ).removeClass( "ui-state-error" );
      }
    });
 

    $( "#create-user" )
      .button().click(function() {
        $( "#dialog-form" ).dialog( "open" );
      });

  });

  </script>
</head>
<body>
 
<div id="dialog-form" title="Create new user">
 
  <form>
  <fieldset>
    <label for="name">Name</label>
    <input type="text" name="name" id="name" class="text ui-widget-content ui-corner-all">
    <label for="age">Age</label>
    <input type="text" name="age" id="age" class="text ui-widget-content ui-corner-all">
    <label for="gender">Gender</label>
    <input type="text" name="gender" id="gender" class="text ui-widget-content ui-corner-all">
    <label for="zipcode">zipcode</label>
    <input type="text" name="zipcode" id="zipcode" class="text ui-widget-content ui-corner-all">
    <label for="income">Income</label>
    <input type="text" name="income" id="income" class="text ui-widget-content ui-corner-all">
    <label for="photo">Photo</label>
    <input type="text" name="photo" id="photo" class="text ui-widget-content ui-corner-all">
    <label for="description">Description</label>
    <input type="text" name="description" id="description" class="text ui-widget-content ui-corner-all">
    <label for="email">Email</label>
    <input type="text" name="email" id="email" class="text ui-widget-content ui-corner-all">
    <label for="phone">Phone</label>
    <input type="text" name="phone" id="phone" class="text ui-widget-content ui-corner-all">


    Create new team? <input class="messageCheckbox" type="checkbox" id="checkbox" />
    <script>
      $("#checkbox").click( function(){
         if( $(this).is(':checked')){
            $( "#dd2" ).hide();  
            $( "#newTeam" ).show();  
         } 
         else{
            $( "#dd2" ).show();
            $( "#newTeam" ).hide();
         }
      });
    </script>


    <input type="text" id="newTeam" name="newTeam" class="text ui-widget-content ui-corner-all" style="display:none">

    <div id="dd1">
    What sport are you interested in?
    <select id="interests">
      <option></option>
      <script>
          for(i=0; i<SPORTLIST.length; i++) {  
              document.write('<option value="' + SPORTLIST[i] +'">' + SPORTLIST[i] + '</option>');
          }
      </script>
    </select><br>
    </div>


    <div id="dd2">
      What team would you like to join?
      <select id="teams">
        <option></option>
        <script>
            for(i=0; i<TEAMS.length; i++) {  
                document.write('<option value="' + TEAMS[i].teamName +'">' + TEAMS[i].teamName + '</option>');
            }
        </script>
      </select><br>
    </div>

  </fieldset>
  </form>

</div>


<button id="create-user">Create new user</button>
 
 
</body>
</html>